{#
/**
 * @file
 * Theme override to display a node for webny-event.
 * Begin TWIG NODE-WEBNY-EVENT Template
 * CREATED BY WEBNY
 */
#}

{# NODE FIELDS #}
{# Event details                    -- body #}
{# Agency keywords                  -- field_webny_agency_keywords #}
{# Content categorization           -- field_webny_contentcat #}
{# Location                         -- field_webny_event_address #}
{# All day event                    -- field_webny_event_all_day #}
{# Content sections                 -- field_webny_event_contentsect #}
{# End date (see custom vars)       -- field_webny_event_date_end #}
{# Start date (see custom vars)     -- field_webny_event_date_start #}
{# Hero image                       -- field_webny_event_heroimage #}
{# Navigation toggle on/off         -- field_webny_event_navtoggle #}
{# Redirect Url                     -- field_webny_event_redirect_url #}
{# Short title                      -- field_webny_event_short_title #}
{# Summary description              -- field_webny_event_summary #}
{# Venue name                       -- field_webny_event_venue_name #}
{# Global Keywords                  -- field_webny_global_keywords #}

{# CUSTOM NODE VARIABLES #}
{# Combined time value              -- event_time #}
{# Start day                        -- start_day #}
{# Start month                      -- start_month #}
{# End day                          -- end_day #}
{# End month                        -- end_month #}
{# See webny_event_content_type_preprocess_node() for extra variables. #}

{# ATTACH JS LIBRARY #}
{{ attach_library('webny_theme/navigator') }}
{{ attach_library('webny_theme/callouts') }}

{# DECLARED VARS #}
{% set hero_image = file_url(node.field_webny_event_heroimage.entity.field_image.entity.uri.value) %}
{% if hero_image == '/' %}
    {% set hero_image_class = 'hero-no-image' %}
{% else %}
    {% set hero_image_class = 'hero-has-image' %}
    {% set hero_has_image_content = 'hero-has-image-content' %}
{% endif %}

<div class="webny-event-content-page">

    {# NEW HERO SECTION #}

    <article {{ attributes.addClass('hero-event','hero-layout') }}>

        {# START QUICK EDITS #}
        {{ title_prefix }}

        <div class="hero-background {{ hero_image_class }}">
            <div class="hero-image">
                {{ content.field_webny_event_heroimage }}
            </div>
            <div class="hero-bkg"></div>
        </div>
        <div class="hero-content-wrap">
            <div class="hero-inner hero-event-inner {{ hero_has_image_content }}">
                {# Title block #}
                <div class="hero-event--title-block">
                    <h1>{{ label }}</h1>

                    <div class="hero-keywords">
                        {{ content.field_webny_global_keywords }}
                    </div>
                </div>
            </div>
        </div>

        {{ title_suffix }}

        {# Event date block #}
        <div class="hero-event--date-block">
            {% include '@webny_theme/content/webny--event-date.html.twig' %}
        </div>

    </article>

    <div class="actions">
        <div class="webny-share-bar webny-action-bar">
            <div class="webny-share">
                <div class="webny-share-bar-icons">
                    <div class="webny-action-share-label">SHARE</div>
                    <div class="webny-action-share-button">
                        <a href="mailto:?Subject={{ site_name }}: {{ node.label }}&Body={{ url('<current>') }}" target="_blank"><span class="icon-email"></span></a>
                    </div>
                    <div class="webny-action-share-button">
                        <a href="http://www.facebook.com/share.php?u={{ url('<current>') }}" target="_blank"><span class="icon-facebook"></span></a>
                    </div>
                    <div class="webny-action-share-button">
                        <a href="https://twitter.com/intent/tweet?text={{ node.label }}&url={{ url('<current>') }}" target="_blank"><span class="icon-twitter"></span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    {% if node.field_webny_event_navtoggle.value == 1 %}
        {# NAV ENABLED: PARAGRAPHS SECTION WITH SIDEBAR FOR NAVIGATOR / TOC#}
        <div class="page-paragraphs gp-paragraphs with-nav-sidebar">
            <div class="page-paragraphs-in">
                <aside id="gpnav_sidebar">
                    <header>Sections</header>
                    <ul>
                        <li class="see-all"><a href="#" class="icon-all_steps"><span>See All</span></a></li>
                    </ul>
                    <span class="arrow"></span>
                </aside>
                <div class="gp-article-content">
                    <div class="gp-chapters">
                        {{ content.body }}
                        {{ content.field_webny_event_contentsect|without('label') }}
                    </div>
                </div>
            </div>
        </div>

    {% else %}

        {# NAV DISABLED: GENERIC PARAGRAPHS SECTION FOR USE WITHOUT NAV FUNCTIONALITY #}
        <div class="page-paragraphs gp-paragraphs">
            <div class="page-paragraphs-in">
                {{ content.body }}
                {{ content.field_webny_event_contentsect|without('label') }}
            </div>
        </div>

    {% endif %}

</div>
