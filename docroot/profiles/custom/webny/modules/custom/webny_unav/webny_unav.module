<?php

/**
 * Implements hook_theme().
 */
function webny_unav_theme() {
    return array(
        'webny_unav_header' => array(
            'template' => 'webny-unav-header',
            'variables' => array(),
        ),
        'webny_unav_footer' => array(
            'template' => 'webny-unav-footer',
            'variables' => array(),
        ),
    );
}

/**
 * Implements hook_page_top().
 *
 * Add uNav header to the page_top region
 * automatically if Drupal variable webny_unav_auto is TRUE.
 * But don't add uNav if on an administrative page.
 */
function webny_unav_page_top(&$page_top) {
    // Skip menu if not Auto or on administrative page.
    $config = \Drupal::config('webny_unav.settings');
    $unav_auto = $config->get('webny_unav.webny_unav_auto');
    $is_admin = \Drupal::service('router.admin_context')->isAdminRoute();
    if ($unav_auto == '0' || $is_admin) {
        return;
    }
    $page_top['page_top']['webny_unav'] = array(
        '#weight' => -1000,
        '#theme' => 'webny_unav_header',
    );
}

/** Implemtnet hook_page_bottom().
 *
 * Add uNav footer to the page_bottom region
 * automatically if Drupal variable webny_unav_auto is TRUE.
 * But don't add uNav if on an administrative page
 */
function webny_unav_page_bottom(&$page_bottom) {
    // Skip menu if not Auto or on administrative page.
    $config = \Drupal::config('webny_unav.settings');
    $unav_auto = $config->get('webny_unav.webny_unav_auto');
    $is_admin = \Drupal::service('router.admin_context')->isAdminRoute();
    if ($unav_auto == '0' || $is_admin) {
        return;
    }
    $page_bottom['page_bottom']['webny_unav'] = array(
        '#weight' => 1000,
        '#theme' => 'webny_unav_footer',
    );
}

/**
 * Function webny_unav_preprocess.
 */
function webny_unav_preprocess(&$variables) {
  $variables['#attached']['library'][] = 'webny_unav/webny-unav';
}